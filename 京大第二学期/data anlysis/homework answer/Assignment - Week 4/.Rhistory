class_RTs <- filter(class_RTs, (Pref_Reaction_time_ave < 1000)) # remove unexpected values as needed
#plot histrogram of data
ggplot() +
geom_histogram(data = class_RTs, aes(x=Pref_Reaction_time_ave))
# Separate the histograms for each sex:
ggplot() +
geom_histogram(data = class_RTs, aes(x=Pref_Reaction_time_ave), binwidth = 10) +
facet_wrap(~ Sex) #, binwidth = 20
# box and whisker plot
ggplot() +
geom_boxplot(data = class_RTs, aes(x=Sex, y=Pref_Reaction_time_ave))
# raw data points plot
ggplot() +
geom_jitter(data = class_RTs,
aes(x=Sex, y=Pref_Reaction_time_ave),
width=0.05)
#Let's get some basic statistics to wrap it up
#getting the mean
class_RTs %>% group_by(Sex) %>%
summarise(mean_RT=mean(Pref_Reaction_time_ave),
sd_RT=sd(Pref_Reaction_time_ave))
# t-test
my_ttest <- t.test(Pref_Reaction_time_ave ~ Sex, data=class_RTs, var.equal=TRUE)
my_ttest
# First we load a required package (we need to install this if we haven't already)
library(readr)
# also we will use some other packages
library(dplyr)
library(ggplot2)
# Now read in the data, using the read_csv() function and store it in class_RTs.
class_RTs <- read_csv("data/RT_data_insights_2025.csv")
# Have a look at the data in R
#View(class_RTs)
# or just do
class_RTs
glimpse(class_RTs)
View(class_RTs)
# Must be very careful to get the next line right!!! Really important!!!
names(class_RTs) <- c("Timestamp", "ID", "Sex", "Age", "Handedness", "Pref_Reaction_time_1", "Pref_Reaction_time_2",
"Pref_Reaction_time_3",  "Pref_Reaction_time_4", "Pref_Reaction_time_5","Pref_Reaction_time_ave")
class_RTs
glimpse(class_RTs)
# Have to do this live!!!
# e.g. to exclude observations with character entries in Reaction_time variable
class_RTs <- filter(class_RTs, !is.na(as.numeric(Pref_Reaction_time_ave)))
# try using type_convert() from readr package.
class_RTs <- type_convert(class_RTs)
# Check numbers of data points in each sex by extracting column for Sex using $
table(class_RTs$Sex) # this is base R to get the counts at each combination of factor level, here Sex.
#check number of observations
class_RTs
# Verify that user entered mean fits entered data points by calculating Mean in a new column
class_RTs <- mutate(class_RTs, Mean = rowMeans(class_RTs[,6:10 ]))
class_RTs <- filter(class_RTs, (Pref_Reaction_time_ave < 1000)) # remove unexpected values as needed
#plot histrogram of data
ggplot() +
geom_histogram(data = class_RTs, aes(x=Pref_Reaction_time_ave))
# Separate the histograms for each sex:
ggplot() +
geom_histogram(data = class_RTs, aes(x=Pref_Reaction_time_ave), binwidth = 10) +
facet_wrap(~ Sex) #, binwidth = 20
# box and whisker plot
ggplot() +
geom_boxplot(data = class_RTs, aes(x=Sex, y=Pref_Reaction_time_ave))
# raw data points plot
ggplot() +
geom_jitter(data = class_RTs,
aes(x=Sex, y=Pref_Reaction_time_ave),
width=0.05)
#Let's get some basic statistics to wrap it up
#getting the mean
class_RTs %>% group_by(Sex) %>%
summarise(mean_RT=mean(Pref_Reaction_time_ave),
sd_RT=sd(Pref_Reaction_time_ave))
# t-test
my_ttest <- t.test(Pref_Reaction_time_ave ~ Sex, data=class_RTs, var.equal=TRUE)
my_ttest
#Final graph (with proper y-axis label)
ggplot() +
geom_boxplot(data = class_RTs,
aes(x=Sex, y=Pref_Reaction_time_ave)) +
ylab("Reaction time (milliseconds)")
# 加载库
library(ggplot2)
library(patchwork)
library(readr)
# 读取数据
bats <- read_csv("data/dataset_Mata.et.al.2016.csv", na = "na")
library(ggplot2)
library(patchwork)
library(readr)
# 读取数据
bats <- read_csv("data/dataset_Mata.et.al.2016.csv", na = "na")
library(ggplot2)
library(patchwork)
library(readr)
# 读取数据
bats <- read_csv("data/dataset_Mata.et.al.2016.csv", na = "na")
library(dplyr)
library(ggplot2)
library(readr)
library(stringr)
library(lubridate)
library(tidyr)
library(ggbeeswarm)
bats <- read_csv("dataset_Mata.et.al.2016.csv", na = "na")
names(bats) <- str_replace_all(names(bats), c(" " = "_"))
names(bats) <- str_replace_all(names(bats), c("\\(" = "", "\\)" = ""))
bats <- bats %>%
mutate(Date_proper = ymd(Date))
bats <- bats %>%
select(-Date)
bats <- bats %>%
mutate(Sex = case_when(Sex == "M" ~ "Male",
Sex == "F" ~ "Female"))
bats <- bats %>%
mutate(Age = case_when(Age == "Ad" ~ "Adult",
Age == "Juv" ~ "Juvenile"))
bats %>%
duplicated() %>%
sum()
bats %>%
select(Bat_ID, Sp._Nr., Date_proper) %>%
duplicated() %>%
sum()
bats %>%
summarise(var_min = min(Wingspan_mm, na.rm = TRUE),
var_max = max(Wingspan_mm, na.rm = TRUE))
bats %>%
distinct(Sex)
bats %>%
summarise(num_nas = sum(is.na(Wingspan_mm)))
bats %>%
summarise(
across(.cols = everything(),
.fns = ~sum(is.na(.)))) %>%
write_csv(bats, file = "my_clean_bats.csv")
bats <- read_csv("dataset_Mata.et.al.2016.csv", na = "na")
glimpse(bats)
setwd("C:/Users/kunqi/Desktop/京大第二学期/data anlysis/homework answer/Assignment- Week 5")
bats <- read_csv("dataset_Mata.et.al.2016.csv", na = "na")
glimpse(bats)
bats %>%
select(`Wingspan (mm)`) %>%
head(10)
bats <- bats %>%
rename(Bat_ID = Sample)
bats <- bats %>%
rename(Row_order = `Order`,
Order = `Order_1`)
names(bats) <- str_replace_all(names(bats), c(" " = "_"))
names(bats) <- str_replace_all(names(bats), c("\\(" = "", "\\)" = ""))
bats <- bats %>%
mutate(Date_proper = ymd(Date))
bats <- bats %>%
select(-Date)
bats <- bats %>%
mutate(Sex = case_when(Sex == "M" ~ "Male",
Sex == "F" ~ "Female"))
bats <- bats %>%
mutate(Age = case_when(Age == "Ad" ~ "Adult",
Age == "Juv" ~ "Juvenile"))
bats %>%
duplicated() %>%
sum()
bats %>%
select(Bat_ID, Sp._Nr., Date_proper) %>%
duplicated() %>%
sum()
bats %>%
summarise(var_min = min(Wingspan_mm, na.rm = TRUE),
var_max = max(Wingspan_mm, na.rm = TRUE))
bats %>%
distinct(Sex)
bats %>%
summarise(num_nas = sum(is.na(Wingspan_mm)))
bats %>%
summarise(
across(.cols = everything(),
.fns = ~sum(is.na(.)))) %>%
write_csv(bats, file = "my_clean_bats.csv")
bats %>%
summarise(
across(.cols = everything(),
.fns = ~sum(is.na(.)))) %>%
write_csv(bats, file = "my_clean_bats.csv")
bats %>%
summarise(
across(.cols = everything(),
.fns = ~sum(is.na(.)))) %>%
write_csv(bats, file = "my_clean_bats.csv")
(bats %>%
summarise(across(everything(), ~sum(is.na(.))))) %>%
write_csv("my_clean_bats.csv")
# Load the libraries we use
library(dpyr)
library(ggplot)
library(redr)
library(stingr)
Sys.setenv(LANG = "en_US.UTF-8")
# Load the libraries we use
library(dpyr)
# Load the libraries we use
##library(dpyr)
library(dplyr)
library(ggplot)
library(ggplot2)
library(redr)
library(readr)
library(stingr)
library(stringr)
library(lubridat)
library(lubridate)
library(tidy)
##library(tidy)
library(ggbeswarm)
##library(tidy)
library(ggbeeswarm)
##library(tidy)
library(ggbeeswarm)
# read in the bat data, specifying the NA string as "na"
bats <- Read_csv("data/bat_sex_diet_Mata_etal_2016.csv", na = "na")
# read in the bat data, specifying the NA string as "na"
read_csv("data/bat_sex_diet_Mata_etal_2016.csv", na = "na")
# rename Sample to Bat_ID
bats < bats %>%
rename("Bat_ID" = "Sample")
# rename Sample to Bat_ID
bats <- bats %>%
rename("Bat_ID" = "ID")
# rename Order to Row_order
# rename Order to Row_order
# and Order_1 to Order.
bats <- bats %>%
"Order" = "Order_1")
# rename Order to Row_order
# and Order_1 to Order.
bats <- bats %>%
rename("Row_order" = "Order",
"Order" = "Order_1")
# First we load a required package (we need to install this if we haven't already)
library(readr)
# also we will use some other packages
library(dplyr)
library(ggplot2)
# Now read in the data, using the read_csv() function and store it in class_RTs.
class_RTs <- read_csv("data/RT_data_insights_2025.csv")
# Have a look at the data in R
#View(class_RTs)
# or just do
class_RTs
glimpse(class_RTs)
View(class_RTs)
# Must be very careful to get the next line right!!! Really important!!!
names(class_RTs) <- c("Timestamp", "ID", "Sex", "Age", "Handedness", "Pref_Reaction_time_1", "Pref_Reaction_time_2",
"Pref_Reaction_time_3",  "Pref_Reaction_time_4", "Pref_Reaction_time_5","Pref_Reaction_time_ave")
class_RTs
glimpse(class_RTs)
# Have to do this live!!!
# e.g. to exclude observations with character entries in Reaction_time variable
class_RTs <- filter(class_RTs, !is.na(as.numeric(Pref_Reaction_time_ave)))
# try using type_convert() from readr package.
class_RTs <- type_convert(class_RTs)
# Check numbers of data points in each sex by extracting column for Sex using $
table(class_RTs$Sex) # this is base R to get the counts at each combination of factor level, here Sex.
#check number of observations
class_RTs
# Verify that user entered mean fits entered data points by calculating Mean in a new column
class_RTs <- mutate(class_RTs, Mean = rowMeans(class_RTs[,6:10 ]))
class_RTs <- filter(class_RTs, (Pref_Reaction_time_ave < 1000)) # remove unexpected values as needed
#plot histrogram of data
ggplot() +
geom_histogram(data = class_RTs, aes(x=Pref_Reaction_time_ave))
# Separate the histograms for each sex:
ggplot() +
geom_histogram(data = class_RTs, aes(x=Pref_Reaction_time_ave), binwidth = 10) +
facet_wrap(~ Sex) #, binwidth = 20
# box and whisker plot
ggplot() +
geom_boxplot(data = class_RTs, aes(x=Sex, y=Pref_Reaction_time_ave))
# raw data points plot
ggplot() +
geom_jitter(data = class_RTs,
aes(x=Sex, y=Pref_Reaction_time_ave),
width=0.05)
#Let's get some basic statistics to wrap it up
#getting the mean
class_RTs %>% group_by(Sex) %>%
summarise(mean_RT=mean(Pref_Reaction_time_ave),
sd_RT=sd(Pref_Reaction_time_ave))
# t-test
my_ttest <- t.test(Pref_Reaction_time_ave ~ Sex, data=class_RTs, var.equal=TRUE)
my_ttest
#Final graph (with proper y-axis label)
ggplot() +
geom_boxplot(data = class_RTs,
aes(x=Sex, y=Pref_Reaction_time_ave)) +
ylab("Reaction time (milliseconds)")
##library(tidy)
library(ggbeeswarm)
# read in the bat data, specifying the NA string as "na"
read_csv("data/bat_sex_diet_Mata_etal_2016.csv", na = "na")
setwd("C:/Users/kunqi/Desktop/京大第二学期/data anlysis/homework answer/Assignment-Week 6")
# Load the libraries we use
library(dplyr)
library(ggplot2)
library(readr)
library(stringr)
library(lubridate)
##library(tidy)
library(ggbeeswarm)
# read in the bat data, specifying the NA string as "na"
read_csv("data/bat_sex_diet_Mata_etal_2016.csv", na = "na")
# read in the bat data, specifying the NA string as "na"
read_csv("data/dataset_Mata.etal.2016.csv", na = "na")
# read in the bat data, specifying the NA string as "na"
read_csv("data/dataset_Mata.et.al.2016.csv", na = "na")
# rename Sample to Bat_ID
bats <- bats %>%
rename("Bat_ID" = "ID")
# rename Sample to Bat_ID
bats <- bats %>%
rename("Bat_ID" = "Sample")
names(bats)
#
#
#
# rename Order to Row_order
# and Order_1 to Order.
bats <- bats %>%
rename("Row_order" = "Order",
"Order" = "Order_1")
# read in the bat data, specifying the NA string as "na"
bats <- read_csv("data/dataset_Mata.et.al.2016.csv", na = "na")
# rename Sample to Bat_ID
bats <- bats %>%
rename("Bat_ID" = "ID")
# rename Sample to Bat_ID
bats <- bats %>%
rename("Bat_ID" = "Sample")
# rename Order to Row_order
# and Order_1 to Order.
bats <- bats %>%
rename("Row_order" = "Order",
"Order" = "Order_1")
# rename Order to Row_order
# and Order_1 to Order.
bats <- bats %>%
rename("Row_order" = "Order...1",
"Order" = "Order...8")
# rename Order to Row_order
# and Order_1 to Order.
bats <- bats %>%
rename("Row_order" = "Order",
"Order" = "Order_1")
# rename Order to Row_order
# and Order_1 to Order.
bats <- bats %>%
rename("Row_order" = "Order...1",
"Order" = "Order...8")
# read in the bat data, specifying the NA string as "na"
bats <- read_csv("data/dataset_Mata.et.al.2016.csv", na = "na")
# rename Sample to Bat_ID
bats <- bats %>%
rename("Bat_ID" = "Sample")
# rename Order to Row_order
# and Order_1 to Order.
bats <- bats %>%
rename("Row_order" = "Order...1",
"Order" = "Order...8")
# change all spaces to underscores
names(bat) <- str_replace_all(names(bats), c(" " = "_"))
Sys.setenv(LANG = "en_US.UTF-8")
# change all spaces to underscores
names(bat) <- str_replace_all(names(bats), c(" " = "_"))
# change all spaces to underscores
names(bats) <- str_replace_all(names(bats), c(" " = "_"))
# get rid of brackets in names
# there is no error in the following line:
names(bats) <- str_replace_all(names(bats), c("\\(" = "", "\\)" = ""))
# use function dmy() from stringr package to
# encode Dates properly
bats <- bats %>%
mutate(Date_proper = dmy(date))
names(bats)
# use function dmy() from stringr package to
# encode Dates properly
bats <- bats %>%
mutate(Date_proper = dmy(Date))
glimpse(bats)
# use function dmy() from stringr package to
# encode Dates properly
bats <- bats %>%
mutate(Date_proper = dmy(as.character(Date)))
unique(bats$Date)
library(lubridate)
# use function dmy() from stringr package to
# encode Dates properly
bats <- bats %>%
mutate(Date_proper = dmy(Date))
# use function dmy() from stringr package to
# encode Dates properly
bats <- bats %>%
mutate(Date_proper = dmy(Date, quiet = TRUE))
# update our working copy of the data to
# remove the old Date column but leave the Date_proper one in
bats <- bats $>$
# update our working copy of the data to
# remove the old Date column but leave the Date_proper one in
bats <- bats %>%
select(-Date)
# use mutate and case_when
# for nested if-else like changes to values in a variable
# e.g. if Sex is M, make it Male....
# # there is no error in the following three lines:
bats <- bats %>%
mutate(Sex = case_when(Sex == "M" ~ "Male",
Sex == "F" ~ "Female"))
# case_when replacement of Age values.
bats <- bats %>%
mutate(Age = case.when(Age == "Ad" ~ "Adult",
Age == "Juv" ~ "Juvenile"))
# use mutate and case_when
# for nested if-else like changes to values in a variable
# e.g. if Sex is M, make it Male....
# # there is no error in the following three lines:
bats <- bats %>%
mutate(Sex = case_when(Sex == "M" ~ "Male",
Sex == "F" ~ "Female"))
# case_when replacement of Age values.
bats <- bats %>%
mutate(Age = case.when(Age == "Ad" ~ "Adult",
Age == "Juv" ~ "Juvenile"))
# case_when replacement of Age values.
bats <- bats %>%
mutate(Age = case_when(Age == "Ad" ~ "Adult",
Age == "Juv" ~ "Juvenile"))
# check for duplicate rows in the bats data
bats %>%
duplcated() %>%
sum()
# check for duplicate rows in the bats data
bats %>%
duplicated() %>%
sum()
# check for duplicate rows in the bats data
bats %>%
duplicated() %>%
sum()
# check for duplicates among specific combinations of variables
# select the ID, Sp._Nr. and Date_proper
bats %>%
select(Bat_id, Sp._nr., date_proper) %>%
duplicated() %>%
sum()
# check for duplicates among specific combinations of variables
# select the ID, Sp._Nr. and Date_proper
bats %>%
select(Bat_ID, Sp._Nr., Date_proper) %>%
duplicated() %>%
sum()
# use summarise to calculate things about specific variables
bats %>%
summarise(var_min = min(wingspan_mm, na.rm = TRUE),
var_max = max(Wingspan_mm; na.rm = TRUE))
# use summarise to calculate things about specific variables
bats %>%
summarise(var_min = min(wingspan_mm, na.rm = TRUE),
var_max = max(wingspan_mm, na.rm = TRUE))
# use summarise to calculate things about specific variables
bats %>%
summarise(var_min = min(wingspan_mm, na.rm = TRUE),
var_max = max(wingspan_mm, na.rm = TRUE))
# check for duplicates among specific combinations of variables
# select the ID, Sp._Nr. and Date_proper
bats %>%
select(Bat_ID, Sp._Nr., Date_proper) %>%
duplicated() %>%
sum()
# use summarise to calculate things about specific variables
bats %>%
summarise(var_min = min(wingspan_mm, na.rm = TRUE),
var_max = max(wingspan_mm, na.rm = TRUE))
names(bats)
# use summarise to calculate things about specific variables
bats %>%
summarise(
var_min = min(Wingspan_mm, na.rm = TRUE),
var_max = max(Wingspan_mm, na.rm = TRUE))
# use the dplyr function distinct() on the Sex variable to detect unexpected groups
bats %>%
distinctive(Sex)
# use the dplyr function distinct() on the Sex variable to detect unexpected groups
bats %>%
distinct(Sex)
# get sum of wingspan values that are NA
## Lots of errors...
bats %>%
summarises(num_nas = sum(Is_na(wingspan_mm)))
# use the function across to sum the NAs in every column
# note the use of the function symbol "~" before sum() to make this work
# .cols specifies the columns and .fns defines the function(s)
# no errors from here on.
bats %>%
summarise(
across(.cols = everything(),
.fns = ~sum(is.na(.)))) %>%
glimpse()
# get sum of wingspan values that are NA
## Lots of errors...
bats %>%
summarise(num_nas = sum(is.na(Wingspan_mm)))
